<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tech Institute - Courses</title>
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.22.9/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-query@5.59.15/dist/react-query.umd.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/i18next@23.11.5/dist/umd/i18next.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-i18next@14.1.2/dist/umd/react-i18next.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:wght@400;700&display=swap">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX');
  </script>
</head>
<body>
  <div id="root"></div>
<script type="text/babel">
const { useState, useEffect } = React;
const { useTranslation, initReactI18next } = window.ReactI18next;

// Check if React Query is loaded
const hasReactQuery = typeof window.QueryClient !== 'undefined' && 
                     typeof window.QueryClientProvider !== 'undefined' && 
                     typeof window.useQuery !== 'undefined';
const QueryClient = window.QueryClient;
const QueryClientProvider = window.QueryClientProvider;
const useQuery = window.useQuery;

const queryClient = hasReactQuery ? new QueryClient({
  defaultOptions: {
    queries: {
      retry: 3,
      retryDelay: attempt => Math.min(1000 * 2 ** attempt, 30000),
      staleTime: 5 * 60 * 1000
    }
  }
}) : null;

// i18next Initialization
i18next.use(initReactI18next).init({
  resources: {
    en: { translation: {
      "courses": "Courses",
      "search_courses": "Search Courses...",
      "all_categories": "All Categories",
      "enroll_now": "Enroll Now",
      "image_unavailable": "Image Unavailable",
      "no_courses": "No courses found",
      "loading": "Loading...",
      "error_loading": "Error loading courses. Showing static data."
    }},
    es: { translation: {
      "courses": "Cursos",
      "search_courses": "Buscar Cursos...",
      "all_categories": "Todas las Categorías",
      "enroll_now": "Inscribirse Ahora",
      "image_unavailable": "Imagen No Disponible",
      "no_courses": "No se encontraron cursos",
      "loading": "Cargando...",
      "error_loading": "Error al cargar cursos. Mostrando datos estáticos."
    }},
    fr: { translation: {
      "courses": "Cours",
      "search_courses": "Rechercher des Cours...",
      "all_categories": "Toutes les Catégories",
      "enroll_now": "S'inscrire Maintenant",
      "image_unavailable": "Image Indisponible",
      "no_courses": "Aucun cours trouvé",
      "loading": "Chargement...",
      "error_loading": "Erreur lors du chargement des cours. Affichage des données statiques."
    }}
  },
  lng: "en",
  fallbackLng: "en",
  interpolation: { escapeValue: false }
});

// Error Boundary
const ErrorBoundary = ({ children }) => {
  const [hasError, setHasError] = useState(false);
  const { t } = useTranslation();

  useEffect(() => {
    const errorHandler = (error) => {
      console.error('ErrorBoundary caught:', error);
      setHasError(true);
    };
    window.addEventListener('error', errorHandler);
    return () => window.removeEventListener('error', errorHandler);
  }, []);

  if (hasError) {
    return <div className="text-center p-6 text-red-600">{t('image_unavailable')}</div>;
  }
  return children;
};

// Header Component
const Header = ({ toggleTheme }) => {
  const { t, i18n } = useTranslation();
  const [isMenuOpen, setIsMenuOpen] = useState(false);

  const toggleMenu = () => setIsMenuOpen(!isMenuOpen);
  const changeLanguage = (lng) => i18n.changeLanguage(lng);

  return (
    <header className="header sticky top-0 w-full bg-teal z-50">
      <div className="container mx-auto px-6 flex justify-between items-center py-3">
        <h1 className="text-2xl font-bold text-soft-white">Tech Institute</h1>
        <nav className={`nav ${isMenuOpen ? 'open' : ''} flex gap-2 items-center`}>
          <a href="index.html" className="nav-link">Home</a>
          <a href="courses.html" className="nav-link">Courses</a>
          <a href="enrollment.html" className="nav-link">Enrollment</a>
          <a href="testimonials.html" className="nav-link">Testimonials</a>
          <a href="vision.html" className="nav-link">Vision</a>
          <a href="contact.html" className="nav-link">Contact</a>
          <a href="about.html" className="nav-link">About</a>
          <a href="dashboard.html" className="nav-link">Dashboard</a>
        </nav>
        <div className="flex items-center gap-3">
          <select className="theme-select bg-teal text-soft-white rounded px-2 py-1" onChange={(e) => toggleTheme(e.target.value)} defaultValue={localStorage.getItem('theme') || 'light'} aria-label="Theme">
            <option value="light">Light</option>
            <option value="dark">Dark</option>
          </select>
          <select className="language-select bg-teal text-soft-white rounded px-2 py-1" onChange={(e) => changeLanguage(e.target.value)} defaultValue="en" aria-label="Language">
            <option value="en">English</option>
            <option value="es">Español</option>
            <option value="fr">Français</option>
          </select>
        </div>
        <button className="hamburger md:hidden ml-3" onClick={toggleMenu} aria-label="Toggle menu">
          <i className={isMenuOpen ? "fas fa-times text-soft-white" : "fas fa-bars text-soft-white"}></i>
        </button>
      </div>
    </header>
  );
};

// Footer Component
const Footer = () => {
  return (
    <footer className="footer bg-teal text-soft-white z-50">
      <div className="container mx-auto px-6 py-2 text-center">
        <h3 className="text-2xl font-bold text-soft-white">Tech Institute</h3>
        <p className="text-sm mt-2 text-soft-white">Tech Institute &copy; 2025</p>
        <div className="flex justify-center gap-4 mt-2">
          <a href="https://twitter.com" target="_blank" className="text-soft-white hover:text-orange"><i className="fab fa-twitter"></i></a>
          <a href="https://linkedin.com" target="_blank" className="text-soft-white hover:text-orange"><i className="fab fa-linkedin"></i></a>
        </div>
      </div>
    </footer>
  );
};

// Courses Component
const Courses = () => {
  const { t } = useTranslation();
  const [searchTerm, setSearchTerm] = useState('');
  const [filterCategory, setFilterCategory] = useState('');
  const staticCourses = [
    { 
      id: 1, 
      title: "Web Development Bootcamp", 
      description: "Dive into the world of web development with this comprehensive bootcamp. Learn HTML, CSS, JavaScript, and React to build responsive, modern websites and web applications. Perfect for beginners and aspiring developers, this course covers front-end and back-end fundamentals, including APIs, state management, and deployment with tools like Git and Netlify. By the end, you’ll create a portfolio-ready project and gain the skills to launch a career in web development.", 
      duration: "12 weeks", 
      category: "Programming" 
    },
    { 
      id: 2, 
      title: "Data Science Fundamentals", 
      description: "Master the essentials of data science with Python, pandas, NumPy, and scikit-learn. Designed for analysts and aspiring data scientists, this course covers data cleaning, visualization, statistical analysis, and introductory machine learning. You’ll work on real-world datasets to uncover insights and build predictive models, preparing you for roles in data analysis, business intelligence, or advanced data science studies.", 
      duration: "10 weeks", 
      category: "Data Science" 
    },
    { 
      id: 3, 
      title: "Cybersecurity Essentials", 
      description: "Gain a solid foundation in cybersecurity with this hands-on course. Learn to protect networks, detect vulnerabilities, and understand ethical hacking techniques. Topics include cryptography, firewalls, intrusion detection, and risk assessment. Ideal for IT professionals and beginners, this course equips you with the skills to secure systems and pursue certifications like CompTIA Security+.", 
      duration: "8 weeks", 
      category: "Cybersecurity" 
    },
    { 
      id: 4, 
      title: "AI and Machine Learning", 
      description: "Explore the exciting field of artificial intelligence and machine learning. This course covers neural networks, deep learning, and algorithms like regression, clustering, and reinforcement learning using TensorFlow and PyTorch. Designed for programmers and data enthusiasts, you’ll build AI models for applications like image recognition and predictive analytics, preparing you for cutting-edge roles in AI development.", 
      duration: "14 weeks", 
      category: "AI" 
    },
    { 
      id: 5, 
      title: "Cloud Computing", 
      description: "Master cloud technologies with AWS and Azure in this practical course. Learn to design, deploy, and manage cloud infrastructure, covering virtual machines, storage, and serverless computing. Aimed at IT professionals and developers, this course includes hands-on labs to build scalable solutions, preparing you for cloud certifications and roles like cloud architect or DevOps engineer.", 
      duration: "10 weeks", 
      category: "Cloud" 
    },
    { 
      id: 6, 
      title: "Mobile App Development", 
      description: "Build cross-platform mobile apps with Flutter and React Native in this immersive course. Learn to create responsive, high-performance apps for iOS and Android, covering UI design, state management, and API integration. Perfect for developers and entrepreneurs, you’ll develop a fully functional app and gain skills for a career in mobile development.", 
      duration: "12 weeks", 
      category: "Programming" 
    },
    { 
      id: 7, 
      title: "Data Analysis with R", 
      description: "Unlock the power of data analysis using R, a leading tool for statistical computing. This course covers data manipulation, visualization with ggplot2, and statistical modeling. Designed for analysts and researchers, you’ll work on real-world projects to analyze trends and present insights, preparing you for roles in data analysis or academic research.", 
      duration: "8 weeks", 
      category: "Data Science" 
    },
    { 
      id: 8, 
      title: "Ethical Hacking", 
      description: "Learn penetration testing and ethical hacking techniques to secure systems against cyber threats. This course covers tools like Metasploit, Wireshark, and Kali Linux, focusing on vulnerability scanning, network attacks, and mitigation strategies. Ideal for cybersecurity enthusiasts, you’ll gain practical skills for certifications like CEH and roles in security consulting.", 
      duration: "10 weeks", 
      category: "Cybersecurity" 
    },
    { 
      id: 9, 
      title: "Deep Learning Advanced", 
      description: "Take your AI skills to the next level with advanced deep learning techniques. Explore convolutional neural networks (CNNs), recurrent neural networks (RNNs), and generative models using TensorFlow and Keras. Designed for AI practitioners, this course includes projects like natural language processing and computer vision, preparing you for specialized AI roles.", 
      duration: "14 weeks", 
      category: "AI" 
    },
    { 
      id: 10, 
      title: "DevOps Essentials", 
      description: "Master DevOps practices to streamline software development and deployment. Learn CI/CD pipelines, containerization with Docker, and orchestration with Kubernetes. Aimed at developers and IT professionals, this course includes hands-on labs to automate workflows and deploy applications, preparing you for roles like DevOps engineer.", 
      duration: "10 weeks", 
      category: "Cloud" 
    },
    { 
      id: 11, 
      title: "Frontend Development", 
      description: "Build stunning user interfaces with React and Vue.js in this hands-on course. Learn modern JavaScript, component-based architecture, and state management with Redux and Vuex. Perfect for web developers, you’ll create responsive, interactive web apps and build a portfolio to launch a career in front-end development.", 
      duration: "10 weeks", 
      category: "Programming" 
    },
    { 
      id: 12, 
      title: "Big Data Analytics", 
      description: "Harness the power of big data with Hadoop and Spark. This course covers distributed computing, data processing, and analytics at scale. Designed for data professionals, you’ll work on large datasets to uncover insights, preparing you for roles in big data engineering and analytics.", 
      duration: "12 weeks", 
      category: "Data Science" 
    },
    { 
      id: 13, 
      title: "Network Security", 
      description: "Learn to secure networks against cyber threats in this practical course. Topics include VPNs, intrusion prevention, and secure network design. Aimed at IT professionals, you’ll gain hands-on experience with tools like Cisco Packet Tracer, preparing you for certifications like CCNA Security.", 
      duration: "8 weeks", 
      category: "Cybersecurity" 
    },
    { 
      id: 14, 
      title: "Natural Language Processing", 
      description: "Build advanced NLP models with Python, NLTK, and transformers like BERT. This course covers text processing, sentiment analysis, and chatbot development. Designed for AI enthusiasts, you’ll create language-based applications and gain skills for roles in NLP and AI research.", 
      duration: "12 weeks", 
      category: "AI" 
    },
    { 
      id: 15, 
      title: "Cloud Architecture", 
      description: "Design and implement scalable cloud systems with AWS and Azure. Learn advanced cloud architecture principles, including microservices, load balancing, and disaster recovery. Aimed at cloud professionals, this course prepares you for certifications like AWS Solutions Architect and high-demand cloud roles.", 
      duration: "10 weeks", 
      category: "Cloud" 
    }
  ];

  const { data: apiCourses, isLoading, error } = hasReactQuery ? useQuery('courses', async () => {
    console.log('Attempting to fetch courses from API...');
    try {
      const response = await fetch('https://jsonplaceholder.typicode.com/posts', { signal: AbortSignal.timeout(10000) });
      if (!response.ok) {
        throw new Error(`HTTP error! Status: ${response.status}`);
      }
      const data = await response.json();
      console.log('API fetch successful:', data);
      return staticCourses.map((course, index) => ({
        ...course,
        available: data[index % data.length]?.id % 2 === 0
      }));
    } catch (err) {
      console.error('API fetch failed:', err.message);
      return staticCourses;
    }
  }, {
    retry: 3,
    retryDelay: attempt => Math.min(1000 * 2 ** attempt, 30000),
    staleTime: 5 * 60 * 1000
  }) : { data: staticCourses, isLoading: false, error: null };

  const filteredCourses = (apiCourses || staticCourses).filter(course =>
    course.title.toLowerCase().includes(searchTerm.toLowerCase()) &&
    (!filterCategory || course.category === filterCategory)
  );

  return (
    <main className="pt-10">
      <section className="section bg-soft-white">
        <div className="container mx-auto px-6">
          <h2 className="text-2xl font-bold text-teal mb-4 text-center">{t('courses')}</h2>
          <div className="flex flex-col md:flex-row gap-3 mb-6 justify-center">
            <input
              type="text"
              placeholder={t('search_courses')}
              value={searchTerm}
              onChange={(e) => {
                setSearchTerm(e.target.value);
                gtag('event', 'course_search', { event_category: 'Search', event_label: e.target.value });
              }}
              className="input w-full max-w-xs"
              aria-label={t('search_courses')}
            />
            <select
              className="input w-full max-w-xs"
              onChange={(e) => {
                setFilterCategory(e.target.value);
                gtag('event', 'course_filter', { event_category: 'Filter', event_label: e.target.value });
              }}
              defaultValue=""
              aria-label={t('all_categories')}
            >
              <option value="">{t('all_categories')}</option>
              <option value="Programming">Programming</option>
              <option value="Data Science">Data Science</option>
              <option value="Cybersecurity">Cybersecurity</option>
              <option value="AI">AI</option>
              <option value="Cloud">Cloud</option>
            </select>
          </div>
          {isLoading ? (
            <p className="text-center text-charcoal">{t('loading')}</p>
          ) : (error || !hasReactQuery) && apiCourses === staticCourses ? (
            <p className="text-center text-red-600">{t('error_loading')}</p>
          ) : null}
          <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
            {filteredCourses.length > 0 ? filteredCourses.map(course => (
              <div key={course.id} className="card bg-soft-white p-4 rounded-lg border border-teal shadow-md animate-fade-in">
                <h3 className="text-lg font-bold text-teal">{course.title}</h3>
                <p className="text-charcoal mb-2">{course.description}</p>
                <p className="text-charcoal">Duration: {course.duration}</p>
                <p className="text-charcoal">Status: {course.available ? 'Available' : 'Waitlist'}</p>
                <a
                  href="enrollment.html"
                  className="button bg-orange text-soft-white mt-2"
                  onClick={() => gtag('event', 'enroll_click', { event_category: 'Button', event_label: course.title })}
                >
                  {t('enroll_now')}
                </a>
              </div>
            )) : (
              <p className="text-center text-charcoal">{t('no_courses')}</p>
            )}
          </div>
        </div>
      </section>
    </main>
  );
};

// Main App Component
const App = () => {
  const [theme, setTheme] = useState(localStorage.getItem('theme') || 'light');

  useEffect(() => {
    document.documentElement.classList.remove('theme-light', 'theme-dark');
    document.documentElement.classList.add(`theme-${theme}`);
    localStorage.setItem('theme', theme);
  }, [theme]);

  const toggleTheme = (newTheme) => {
    setTheme(newTheme);
  };

  return (
    hasReactQuery ? (
      <QueryClientProvider client={queryClient}>
        <ErrorBoundary>
          <div className={`theme-${theme}`}>
            <Header toggleTheme={toggleTheme} />
            <Courses />
            <Footer />
          </div>
        </ErrorBoundary>
      </QueryClientProvider>
    ) : (
      <ErrorBoundary>
        <div className={`theme-${theme}`}>
          <Header toggleTheme={toggleTheme} />
          <Courses />
          <Footer />
        </div>
      </ErrorBoundary>
    )
  );
};

// Render the App
ReactDOM.render(<App />, document.getElementById('root'));
</script>
</body>
</html>